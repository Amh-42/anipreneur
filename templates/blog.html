{% extends "base.html" %}

{% block title %}Blog - Anipreneur{% endblock %}

{% block content %}
<!-- HERO SECTION -->
<section class="hero">
    <div class="hero-content" data-aos="fade-up">
        <h1>Anime <span>Insights</span> & Strategies</h1>
        <p>Deep dives into anime characters, psychological analysis, and actionable life lessons. Discover how your
            favorite anime can transform your mindset and approach to life.</p>
    </div>
</section>

<!-- BLOG POSTS SECTION -->
<div class="blog-container">
    {% if posts.items %}
    <div class="blog-grid">
        {% for post in posts.items %}
        <div class="blog-card" data-aos="fade-up" data-aos-delay="{{ loop.index * 100 }}">
            <h3><a href="{{ url_for('post_detail', slug=post.slug) }}">{{ post.title | safe }}</a></h3>
            <div class="blog-meta">
                <span>By {{ post.author.username }}</span> |
                <span><i class="fas fa-calendar-alt"></i> {{ post.created_at.strftime('%B %d, %Y') }}</span>
            </div>

            {% if post.featured_image %}
            <div class="blog-featured-image">
                <img src="{{ post.featured_image }}" alt="{{ post.title }}">
            </div>
            {% endif %}

            <div class="blog-excerpt">
                {% if post.excerpt %}
                {{ post.excerpt | safe }}
                {% else %}
                {{ post.content[:200] | safe }}...
                {% endif %}
            </div>

            <a href="{{ url_for('post_detail', slug=post.slug) }}" class="read-more">Read More →</a>
        </div>
        {% endfor %}
    </div>

    <!-- Pagination -->
    {% if posts.pages > 1 %}
    <div class="pagination" data-aos="fade-up">
        {% if posts.has_prev %}
        <a href="{{ url_for('blog', page=posts.prev_num) }}" class="btn">← Previous</a>
        {% endif %}

        <span>Page {{ posts.page }} of {{ posts.pages }}</span>

        {% if posts.has_next %}
        <a href="{{ url_for('blog', page=posts.next_num) }}" class="btn">Next →</a>
        {% endif %}
    </div>
    {% endif %}
    {% else %}
    <div class="no-posts" data-aos="fade-up">
        <h2>No Posts Yet</h2>
        <p>Check back soon for new content!</p>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_scripts %}
// --- DYNAMICALLY OFFSET FOR FIXED HEADER ---
document.addEventListener('DOMContentLoaded', () => {
const header = document.querySelector('header');
const mainContent = document.querySelector('main');
if (header && mainContent) {
const headerHeight = header.offsetHeight;
mainContent.style.marginTop = `${headerHeight}px`;
}
});
// --- END OF HEADER OFFSET SCRIPT ---
{% endblock %}